name: Update GitHub Blog

on:
  workflow_dispatch:          # manual trigger from the Actions tab
  schedule:
    - cron: '0 2 * * *'      # optional nightly run (02:00‚ÄØUTC)

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      # --------------------------------------------------------------
      # 1Ô∏è‚É£ Checkout the repository (no credentials yet)
      # --------------------------------------------------------------
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          persist-credentials: false   # we‚Äôll push with our own token

      # --------------------------------------------------------------
      # 2Ô∏è‚É£ Set up Node.js (cache only if a lock file exists)
      # --------------------------------------------------------------
      - name: Set up Node.js
        id: node-setup
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          # Enable npm cache only when a lock file is present
          cache: ${{ (hashFiles('package-lock.json') != '' || hashFiles('yarn.lock') != '' ) && 'npm' || '' }}

      # --------------------------------------------------------------
      # 3Ô∏è‚É£ Install dependencies (npm or Yarn) ‚Äì works both ways
      # --------------------------------------------------------------
      - name: Install dependencies
        run: |
          if [ -f package-lock.json ]; then
            echo "üîß npm lock detected ‚Äì installing with npm ci"
            npm ci                         # respects package-lock.json
          elif [ -f yarn.lock ]; then
            echo "üîß Yarn lock detected ‚Äì installing with Yarn"
            yarn install --frozen-lockfile
          else
            echo "‚ö†Ô∏è No lock file ‚Äì installing required packages only"
            npm install prettier --no-package-lock
          fi

      # --------------------------------------------------------------
      # 4Ô∏è‚É£ Run the script that updates the H
